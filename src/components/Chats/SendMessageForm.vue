<template>
	<div class="chat-footer">
		<div class="container">
			<form class="" @submit="sendMessage">
				<div class="input-group">
					<button type="button" class="btn btn-default btn-attach" data-toggle="modal" data-target="#attachmentsModal">
						<img src="@/assets/img/icons/ios-attach.svg" class="attach" alt="">
					</button>
					<button v-if="is_capacitor" type="button" class="btn btn-default btn-attach" data-toggle="modal" @click="takePhoto()">
						<img :src="`data:image/png;base64,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WwHAl4DDJsR2CBAgQOA4gauX/+0A4GvAcbNiQwQIECBwgMCdi//7dv/6nwO+u39/JXBXzO8JECBAgMB8gZHLf/gLgC8B8xvojQQIECBA4K7A6OX/OAAIAndb5fcECBAgQOC5wJOL//FfAXxUvr8WeN5UbyBAgAABAp8JzLj4lwQAXwQMLQECBAgQmC8w8+JfGgB+3LqvAvMHwRsJECBA4HyBFZf+j2rD/xbAE3qh4ImeZwkQIEDgNIHVl/1HXlsCwGmNsx8CBAgQIFBNQACo1jH1EiBAgACBCQICwAREryBAgAABAtUEBIBqHVMvAQIECBCYICAATED0CgIECBAgUE1AAKjWMfUSIECAAIEJAgLABESvIECAAAEC1QQEgGodUy8BAgQIEJggIABMQPQKAgQIECBQTUAAqNYx9RIgQIAAgQkCAsAERK8gQIAAAQLVBASAah1TLwECBAgQmCAgAExA9AoCBAgQIFBNQACo1jH1EiBAgACBCQICwAREryBAgAABAtUEBIBqHVMvAQIECBCYICAATED0CgIECBAgUE1AAKjWMfUSIECAAIEJAgLABESvIECAAAEC1QQEgGodUy8BAgQIEJggIABMQPQKAgQIECBQTUAAqNYx9RIgQIAAgQkCAsAERK8gQIAAAQLVBASAah1TLwECBAgQmCAgAExA9AoCBAgQIFBNQACo1jH1EiBAgACBCQICwAREryBAgAABAtUEBIBqHVMvAQIECBCYICAATED0CgIECBAgUE1AAKjWMfUSIECAAIEJAgLABESvIECAAAEC1QQEgGodUy8BAgQIEJggIABMQPQKAgQIECBQTUAAqNYx9RIgQIAAgQkCAsAERK8gQIAAAQLVBASAah1TLwECBAgQmCAgAExA9AoCBAgQIFBNQACo1jH1EiBAgACBCQICwAREryBAgAABAtUEBIBqHVMvAQIECBCYICAATED0CgIECBAgUE1AAKjWMfUSIECAAIEJAgLABESvIECAAAEC1QQEgGodUy8BAgQIEJggIABMQPQKAgQIECBQTUAAqNYx9RIgQIAAgQkCAsAERK8gQIAAAQLVBASAah1TLwECBAgQmCAgAExA9AoCBAgQIFBN4P8B8DqjQRou2koAAAAASUVORK5CYII=`" class="attach" alt="">
					</button>
					<input type="text" class="form-control"  placeholder="Escribe tu mensaje" id="chat-input-message" autofocus>
					<button type="submit" class="btn btn-default btn-send"><img src="@/assets/img/icons/send.svg" class="send" alt=""></button>
				</div>
			</form>
		</div>
	</div>
</template>

<script>

window.$ = window.jQuery = require('jquery');

import 'emojionearea/dist/emojionearea.min';
import {Capacitor} from '@capacitor/core';
import {Camera, CameraResultType} from '@capacitor/camera';

export default {
	name: 'Send-Message-Form',
	methods:
	{
		async takePhoto() {
			const hasPermission = await Camera.checkPermissions();
			console.log(`hasPermission ${hasPermission.camera}`);
			if (hasPermission.camera !== 'granted') {
				await Camera.requestPermissions();
			} else {
				try {
					const profilePicture = Camera.getPhoto({
						quality: 90,
						allowEditing: false,
						resultType: CameraResultType.DataUrl,
						source: 'CAMERA',
					});
					const photo = (await profilePicture).dataUrl;
					const base64ContentArray = photo.split(',');

					const mimetype = base64ContentArray[0].match(/[^:\s*]\w+\/[\w-+\d.]+(?=[;| ])/)[0];

					fetch(photo)
							.then(res => res.blob())
							.then(blob => {
								console.log('here is your binary: ', blob);
								this.$emit('uploadPhoto',
										{
											data: blob,
											mimeType: mimetype,
										});
								// now upload it
							});

				} catch (error) {
					console.error(error);
				}
				// image.webPath will contain a path that can be set as an image src.
				// You can access the original file using image.path, which can be
				// passed to the Filesystem API to read the raw data of the image,
				// if desired (or pass resultType: CameraResultType.Base64 to getPhoto)
				//    const imageUrl = image.webPath;
				// Can be set to the src of an image now
				// imageElement.src = imageUrl;
			}
		},

		setTextMessage(text)
		{
			//console.log($("#chat-input-message"));
			//$("#chat-input-message").data('emojioneArea').setText(text);
			$("#chat-input-message").val('');
		},
		sendMessage(e)
		{

			e.preventDefault();

			const messageValue = $("#chat-input-message").val();

			if(!messageValue)
			{
				return;
			}

			this.$emit('send', messageValue);

			this.setTextMessage('');

		}
	},
	 computed:
            {
                 is_capacitor() {
                    if ((Capacitor.getPlatform() === 'ios') || (Capacitor.getPlatform() === 'android')) {
                        return true;
                    }
                    return false;
                },

            },
	mounted: function()
	{

		/*$("#chat-input-message").emojioneArea({
		  	pickerPosition: "top",
		  	saveEmojisAs: 'shortname',
		  	filtersPosition: "bottom",
		    tones: true,
		    autocomplete: false,
		    inline: true,
		    search:false,
		    hidePickerOnBlur: false,
		    buttonTitle: "Usá la tecla tab para insertar emojis más rápido",
		    filters:
			{
			    recent: {
			        title: "Reciente",
			    },
			    smileys_people: {
			        title: "Personas",
			    },
			   
			}
	  	});*/
		  
	}
}
</script>
